<h2 mat-dialog-title>Create recipe</h2>
<mat-dialog-content class="recipe-dialog">
  <mat-stepper orientation="vertical" [linear]="false" #stepper>
    <form [formGroup]="formService.form" class="recipe-dialog__form">
      <!-- RECIPE NAME -->
      <mat-step
        [stepControl]="formService.recipeNameControl"
        errorMessage="Recipe name is required."
      >
        <ng-template matStepLabel>Recipe name</ng-template>
        <div class="recipe-dialog__mat-step-content">
          <mat-form-field>
            <mat-label>Name</mat-label>
            <input
              matInput
              placeholder="Recipe name"
              formControlName="recipeName"
              required
            />
          </mat-form-field>
        </div>
      </mat-step>

      <!-- RECIPE DESCRIPTION -->
      <mat-step [stepControl]="formService.recipeDescriptionControl">
        <ng-template matStepLabel>Description (optional)</ng-template>
        <div class="recipe-dialog__mat-step-content">
          <mat-form-field>
            <mat-label>Description</mat-label>
            <input
              matInput
              formControlName="description"
              placeholder="Short description of your recipe"
            />
          </mat-form-field>
        </div>
      </mat-step>

      <!-- RECIPE PREPARATION TIME -->
      <mat-step
        [stepControl]="formService.recipePreparationTimeControl"
        errorMessage="Recipe preparation time is required."
      >
        <ng-template matStepLabel>Preparation time</ng-template>
        <div class="recipe-dialog__mat-step-content">
          <mat-form-field>
            <mat-label>Preparation time (in minutes)</mat-label>
            <input
              type="number"
              matInput
              formControlName="preparationTime"
              placeholder="How long will it take to make it?"
            />
          </mat-form-field>
        </div>
      </mat-step>

      <!-- RECIPE INGREDIENTS -->
      <mat-step
        [stepControl]="formService.ingredientsFormArray"
        errorMessage="List of ingredients contains errors"
      >
        <ng-template matStepLabel>Ingredients</ng-template>
        <ng-container formArrayName="ingredients">
          @for (
            ingredientFormGroup of formService.ingredientsFormArray.controls;
            track ingredientFormGroup;
            let i = $index
          ) {
            <form [formGroup]="ingredientFormGroup">
              <div class="recipe-dialog__mat-step-content">
                <mat-form-field>
                  <mat-label>Ingredient name</mat-label>
                  <input
                    matInput
                    formControlName="ingredientName"
                    placeholder="Ingredient name"
                  />
                </mat-form-field>
                <mat-form-field>
                  <mat-label>Ingredient quantity</mat-label>
                  <input
                    matInput
                    formControlName="ingredientQuantity"
                    placeholder="Quantity"
                  />
                </mat-form-field>
              </div>
            </form>
          }
          <button mat-button (click)="addIngredient()">Add ingredient</button>
        </ng-container>
      </mat-step>
    </form>
  </mat-stepper>
</mat-dialog-content>
<mat-dialog-actions>
  <button mat-flat-button [mat-dialog-close]="true">Close</button>
  <button
    mat-flat-button
    color="primary"
    [disabled]="!formService.form.valid"
    (click)="logForm()"
  >
    Create
  </button>
</mat-dialog-actions>
